#!/usr/bin/env bash
# @author touero
# @since 2025
# screenshot: screenshot costom or by window

choice=$(printf "Region\nWindow\nFullscreen" | "$HOME/.local/bin/menu" show -p "screenshot mode: ")
swappy=$(which swappy)

case "$choice" in
"Window")
  grim -g "$(swaymsg -t get_tree |
    jq -r '.. | select(.pid? and .visible?) | .rect | "\(.x),\(.y) \(.width)x\(.height)"' |
    slurp)" - | "$swappy" -f -
  ;;
"Fullscreen")
  grim - | "$swappy" -f -
  ;;
*)
  grim -g "$(slurp)" - | "$swappy" -f -
  ;;
esac
